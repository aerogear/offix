<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.fd17476c3">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Offix Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Offix Blog Atom Feed"><title data-react-helmet="true">What is new in Offix | Offix</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="offix-0.15.0"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-offix-0.15.0"><meta data-react-helmet="true" property="og:title" content="What is new in Offix | Offix"><meta data-react-helmet="true" name="description" content="0.15.0"><meta data-react-helmet="true" property="og:description" content="0.15.0"><meta data-react-helmet="true" property="og:url" content="https://offix.dev/docs/offix-0.15.0/release-notes"><link data-react-helmet="true" rel="shortcut icon" href="/img/offix-logo.png"><link data-react-helmet="true" rel="alternate" href="https://offix.dev/docs/offix-0.15.0/release-notes" hreflang="x-default"><link data-react-helmet="true" rel="canonical" href="https://offix.dev/docs/offix-0.15.0/release-notes"><link rel="stylesheet" href="/assets/css/styles.053ba0cf.css">
<link rel="preload" href="/assets/js/styles.ebd86db9.js" as="script">
<link rel="preload" href="/assets/js/runtime~main.58f7017d.js" as="script">
<link rel="preload" href="/assets/js/main.18bc1cf6.js" as="script">
<link rel="preload" href="/assets/js/1.90238a31.js" as="script">
<link rel="preload" href="/assets/js/2.31b35ec9.js" as="script">
<link rel="preload" href="/assets/js/49.391e3bd6.js" as="script">
<link rel="preload" href="/assets/js/50.5ad58c42.js" as="script">
<link rel="preload" href="/assets/js/ba1fde28.fca20ae3.js" as="script">
<link rel="preload" href="/assets/js/17896441.6acd41fd.js" as="script">
<link rel="preload" href="/assets/js/c950a71e.b7ff5c44.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_1oUP">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/offix-logo.png" alt="Offix Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/offix-logo.png" alt="Offix Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Offix</strong></a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/getting-started">Docs</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/getting-started">datastore-0.5.0</a></li><li><a class="dropdown__link" href="/docs/offix-0.15.0/getting-started">offix-0.15.0</a></li><li><a class="dropdown__link" href="/docs/next/getting-started">Master/Unreleased</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/versions">vdatastore-0.5.0</a><a href="https://github.com/aerogear/offix" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/offix-logo.png" alt="Offix Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/offix-logo.png" alt="Offix Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Offix</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a aria-current="page" class="menu__link menu__link--sublist navbar__link--active" role="button" href="/docs/getting-started">Docs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/getting-started">datastore-0.5.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/offix-0.15.0/getting-started">offix-0.15.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/getting-started">Master/Unreleased</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/versions">vdatastore-0.5.0</a></li><li class="menu__list-item"><a href="https://github.com/aerogear/offix" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/offix-0.15.0/getting-started">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/offix-0.15.0/client-configuration">Client Configuration</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Offix Client</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/offix-0.15.0/offline-client">Offline Client</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/offix-0.15.0/offix-cache">Client Cache</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/offix-0.15.0/conflict-client">Conflicts Client</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/offix-0.15.0/conflict-server">Conflict Server</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Platforms</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/offix-0.15.0/react">React</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/offix-0.15.0/react-native">React Native</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/offix-0.15.0/angular">Angular</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/offix-0.15.0/ionic">Ionic and Cordova</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/offix-0.15.0/android">Android</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Advanced topics</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/offix-0.15.0/cookbooks">Offline Cookbook</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/offix-0.15.0/offix-scheduler-introduction">Offix Scheduler</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Releases</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/offix-0.15.0/release-notes">Release notes</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for Offix <strong>offix-0.15.0</strong>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <strong><a href="/docs/release-notes">latest version</a></strong> (datastore-0.5.0).</div></div><div class="docItemContainer_33ec"><article><div><span class="badge badge--secondary">Version: offix-0.15.0</span></div><header><h1 class="docTitle_3a4h">What is new in Offix</h1></header><div class="markdown"><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="0150"></a>0.15.0<a class="hash-link" href="#0150" title="Direct link to heading">#</a></h1><p>feat: allow for adding conflict listeners after client creation (#393)</p><p>Adds <code>addConflictListener</code> and <code>removeConflictListener</code> methods to <code>ApolloOfflineClient</code>.</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="0140"></a>0.14.0<a class="hash-link" href="#0140" title="Direct link to heading">#</a></h1><p>fix: persist queue entries after updating optimistic ids (#389)
fix: improve queue handling of optimistic ids + InputMapper (#381)
fix: react example app build issue (#387)
breaking: refactor offline mutate (#378)
breaking: refactor network status interface (#368)
chore: Stop generating source maps (#375)</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="0132"></a>0.13.2<a class="hash-link" href="#0132" title="Direct link to heading">#</a></h1><p>Add useNetworkStatus React hook which can be used to build components that render differently depending on the network state.</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="0131"></a>0.13.1<a class="hash-link" href="#0131" title="Direct link to heading">#</a></h1><p>0.13.1 fixes package install issues that were introduced in 0.13.0. It also introduces some minor dependency updates.</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="0130"></a>0.13.0<a class="hash-link" href="#0130" title="Direct link to heading">#</a></h1><p>The 0.13.0 release is a release contains a couple of bug fixes, dependency updates and the new ability to configure your own <code>CachePersistor</code> object as requested in <a href="https://github.com/aerogear/offix/issues/273" target="_blank" rel="noopener noreferrer">#273</a> and <a href="https://github.com/aerogear/offix/issues/281" target="_blank" rel="noopener noreferrer">#281</a>.</p><p>The <a href="https://github.com/apollographql/apollo-cache-persist#using-cachepersistor" target="_blank" rel="noopener noreferrer">CachePersistor</a> is used by the client to persist the Apollo Cache across application restarts. Pass your own instance to override the one that is created by default.</p><p>Example:</p><div class="mdxCodeBlock_3lFL"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword module" style="color:#e3116c">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">ApolloOfflineClient</span><span class="token imports punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token imports"> createDefaultCacheStorage </span><span class="token imports punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#e3116c">from</span><span class="token plain"> </span><span class="token string">&quot;offix-client&quot;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword module" style="color:#e3116c">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">HttpLink</span><span class="token imports"> </span><span class="token imports punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#e3116c">from</span><span class="token plain"> </span><span class="token string">&quot;apollo-link-http&quot;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword module" style="color:#e3116c">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">InMemoryCache</span><span class="token imports"> </span><span class="token imports punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#e3116c">from</span><span class="token plain"> </span><span class="token string">&quot;apollo-cache-inmemory&quot;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword module" style="color:#e3116c">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">CachePersistor</span><span class="token imports"> </span><span class="token imports punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#e3116c">from</span><span class="token plain"> </span><span class="token string">&quot;apollo-cache-persist&quot;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> link </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token keyword" style="color:#e3116c">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(227, 98, 9)">HttpLink</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"> uri</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token string">&quot;http://example.com/graphql&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> cache </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token keyword" style="color:#e3116c">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(227, 98, 9)">InMemoryCache</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> cachePersistor </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token keyword" style="color:#e3116c">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(227, 98, 9)">CachePersistor</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  cache</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  storage</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">createDefaultCacheStorage</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> client </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token keyword" style="color:#e3116c">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(227, 98, 9)">ApolloOfflineClient</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  cache</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  cachePersistor</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  link</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Note: if using TypeScript, you may need to declare the cachePersistor as follows <code>const cachePersistor = new CachePersistor&lt;object&gt;(...options)</code> or you may experience compiler errors.</p><p>This example uses <code>createDefaultCacheStorage</code> to create the default IndexedDB based storage driver.
The storage can be swapped depending on the platform. For example <code>window.localstorage</code> in older browsers or <code>AsyncStorage</code> in <a href="https://offix.dev/docs/react-native" target="_blank" rel="noopener noreferrer">React Native</a>.</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="0120"></a>0.12.0<a class="hash-link" href="#0120" title="Direct link to heading">#</a></h1><p>The 0.12.0 release brings a new <code>offix-client-boost</code> package. This package is a batteries-included wrapper around the <code>offix-client</code> that brings
everything needed to get started with GraphQL quickly. This includes a cache and support for subscriptions and file uploads.</p><p>Check out the new documentation at <a href="https://offix.dev" target="_blank" rel="noopener noreferrer">offix.dev</a>.</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="0110"></a>0.11.0<a class="hash-link" href="#0110" title="Direct link to heading">#</a></h1><p>The 0.11.0 release simplifies the creation of offline clients. </p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="breaking-changes"></a>Breaking Changes<a class="hash-link" href="#breaking-changes" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="offlineclient-replaced-with-apolloofflineclient"></a>OfflineClient replaced with ApolloOfflineClient<a class="hash-link" href="#offlineclient-replaced-with-apolloofflineclient" title="Direct link to heading">#</a></h3><p>The <code>OfflineClient</code> class has been replaced with <code>ApolloOfflineClient</code>. <code>OfflineClient</code> was a wrapper that would internally create an <code>ApolloClient</code> which could be accessed after initialization. The flow looked something like this.</p><div class="mdxCodeBlock_3lFL"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> offlineClient </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token keyword" style="color:#e3116c">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(227, 98, 9)">OfflineClient</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">options</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> apolloClient </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#e3116c">await</span><span class="token plain"> offlineClient</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token method function property-access" style="color:rgb(111, 66, 193)">init</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>The new <code>ApolloOfflineClient</code> directly <code>extends</code> <code>ApolloClient</code> which makes initialization simpler and more flexible as all of the standard Apollo Client options are supported.</p><p>Initialization is slightly different, mainly, and <code>ApolloLink</code> must be passed that can connect with the GraphQL server. See the example code below.</p><div class="mdxCodeBlock_3lFL"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword module" style="color:#e3116c">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">ApolloOfflineClient</span><span class="token imports"> </span><span class="token imports punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#e3116c">from</span><span class="token plain"> </span><span class="token string">&#x27;offix-client&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> link </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token keyword" style="color:#e3116c">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(227, 98, 9)">HttpLink</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"> uri</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token string">&#x27;http://localhost/graphql&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> config </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  link</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  typeDefs</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  resolvers</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token spread operator" style="color:rgb(0, 92, 197)">...</span><span class="token plain">otherOptions</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> client </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token keyword" style="color:#e3116c">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(227, 98, 9)">ApolloOfflineClient</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword control-flow" style="color:#e3116c">await</span><span class="token plain"> client</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token method function property-access" style="color:rgb(111, 66, 193)">init</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token spread operator" style="color:rgb(0, 92, 197)">...</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">// `client` is an ApolloClient so you can call all of the methods you&#x27;d expect</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">client</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token method function property-access" style="color:rgb(111, 66, 193)">query</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token spread operator" style="color:rgb(0, 92, 197)">...</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">client</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token method function property-access" style="color:rgb(111, 66, 193)">mutate</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token spread operator" style="color:rgb(0, 92, 197)">...</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">client</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token method function property-access" style="color:rgb(111, 66, 193)">offlineMutate</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token spread operator" style="color:rgb(0, 92, 197)">...</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="0100"></a>0.10.0<a class="hash-link" href="#0100" title="Direct link to heading">#</a></h1><p>The <code>0.10.0</code> release builds upon the <code>0.9.0</code> release and adds two new packages. <code>offix-scheduler</code> and <code>offix-conflicts-client</code></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="offix-scheduler"></a>offix-scheduler<a class="hash-link" href="#offix-scheduler" title="Direct link to heading">#</a></h2><p><code>offix-scheduler</code> now holds the core functionalities of the Offix project. That includes queueing, scheduling, persistence and fulfilment of offline operations. </p><p><code>offix-scheduler</code> can and will be used to create new clients in the future that are not based on Apollo Client. Clients we are investigating are URQL (see <a href="https://github.com/aerogear/offix/issues/235" target="_blank" rel="noopener noreferrer">https://github.com/aerogear/offix/issues/235</a>), Relay (see <a href="https://github.com/aerogear/offix/issues/236" target="_blank" rel="noopener noreferrer">https://github.com/aerogear/offix/issues/236</a>) and plain HTTP/REST. <code>offix-client</code> now uses <code>offix-scheduler</code> under the hood.</p><p>There have been no functional changes to <code>offix-client</code> and everything should remain the same.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="offix-conflicts-client"></a>offix-conflicts-client<a class="hash-link" href="#offix-conflicts-client" title="Direct link to heading">#</a></h2><p>The <code>offix-conflicts-client</code> package contains all the interfaces and current implementations for client side pluggable conflict detection and resolution. Right now this package is used in to deliver the conflict capabilities in <code>offix-client</code> and it could also be used by package maintainers to implement conflict capabilities in new clients also. It is not important for application developers looking to use <code>offix-client</code></p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="090"></a>0.9.0<a class="hash-link" href="#090" title="Direct link to heading">#</a></h1><p>The <code>0.9.0</code> release is a significant refactor of the internals of Offix and introduces a couple of breaking changes to the end user API.</p><ul><li>We have a new documentation site available at <a href="https://offix.dev" target="_blank" rel="noopener noreferrer">offix.dev</a>. Special thanks to <a href="https://github.com/LakshanKarunathilake" target="_blank" rel="noopener noreferrer">@LakshanKarunathilake</a> for the complete overhaul.</li><li>All queueing, scheduling, persistence, and replaying of offline operations now happens outside of the Apollo Link chain. Instead we use a much more generic queueing mechanism that opens the door to great flexibility.</li><li>It paves the way for new features in the future. Most importantly, the ability to use Offix with other GraphQL clients, or even with regular RESTful clients (and more).</li><li>The internal architecture of Offix is drastically simplified. It is much easier to understand, maintain and test.</li></ul><p>With this release, <code>OfflineClient</code> behaves mostly the same way as it has before but there were a couple of breaking changes which are outlined below.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="background"></a>Background<a class="hash-link" href="#background" title="Direct link to heading">#</a></h2><p>Previous versions of Offix relied heavily on something called <a href="https://www.apollographql.com/docs/link/overview/" target="_blank" rel="noopener noreferrer">Apollo Link</a> which is essentially chain of &quot;middleware&quot; functions that can modify the behaviour and results from calls like <code>ApolloClient.mutate()</code> and <code>ApolloClient.query()</code>. Most of the underlying queueing, scheduling, persistence and replaying of offline mutations done by Offix happened inside the of the Apollo Link chain. This approach seemed like a good idea, but over time we have realised it made things difficult to maintain and it kept us limited in the features we could provide.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="breaking-changes-1"></a>Breaking Changes<a class="hash-link" href="#breaking-changes-1" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="clientofflinemutation-has-been-deprecated-in-favour-of-clientofflinemutate"></a><code>client.offlineMutation</code> has been deprecated in favour of <code>client.offlineMutate</code><a class="hash-link" href="#clientofflinemutation-has-been-deprecated-in-favour-of-clientofflinemutate" title="Direct link to heading">#</a></h3><p>It didn&#x27;t make sense to have a <code>mutate</code> and <code>offlineMutation</code> method. <code>offlineMutation</code> has been deprecated in favour of <code>offlineMutate</code>. <code>offlineMutation</code> can still be used, but it logs a deprecation warning to the console and it will be removed in the next release.</p><p><strong>Suggestion:</strong> Change all uses of <code>client.offlineMutation</code> to <code>client.offlineMutate</code></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="clientmutate-no-longer-does-any-offline-scheduling"></a>client.mutate no longer does any offline scheduling<a class="hash-link" href="#clientmutate-no-longer-does-any-offline-scheduling" title="Direct link to heading">#</a></h3><p>A side effect of our Apollo Link architecture was that <code>client.mutate()</code> would also schedule operations while offline (as well as <code>client.offlineMutation</code>). Using <code>client.mutate()</code> for offline operations was never recommended but it was possible. This is no longer the case.</p><p><strong>Suggestion:</strong> any places where you intentionally have offline behaviour using <code>client.mutate()</code> should use <code>client.offlineMutate()</code> instead.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="removed-onlineonly-directive"></a>Removed <code>@OnlineOnly</code> directive<a class="hash-link" href="#removed-onlineonly-directive" title="Direct link to heading">#</a></h3><p>Because <code>client.mutate()</code> does not schedule offline operations anymore, the <code>@OnlineOnly</code> directive is no longer useful and has been completely removed.</p><p><strong>Suggestion:</strong> remove all instances of the <code>@OnlineOnly</code> directive and ensure mutations that used it are called with <code>client.mutate()</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="errors-from-clientofflinemutate-do-not-have-networkerror-property"></a>Errors from <code>client.offlineMutate()</code> do not have <code>networkError</code> property.<a class="hash-link" href="#errors-from-clientofflinemutate-do-not-have-networkerror-property" title="Direct link to heading">#</a></h3><p>Errors originating from the Apollo Link chain are found on <code>error.networkError</code>.
This led to checks in application code such as <code>if (error.networkError.offline)</code>,
where <code>error.networkError</code> is the actual error thrown.</p><p>This is no longer the case. Now the everything is found on the top level <code>error</code> object.
See the example below:</p><div class="mdxCodeBlock_3lFL"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> options </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  mutation</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> gql</span><span class="token template-string template-punctuation string">`</span><span class="token template-string string"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token template-string string">    mutation greeting($name: String!){</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token template-string string">    greeting(name: $name) {</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token template-string string">      body</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token template-string string">    }</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token template-string string">  }</span><span class="token template-string template-punctuation string">`</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  variables</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    name</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token string">&#x27;hello world!&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">client</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token method function property-access" style="color:rgb(111, 66, 193)">offlineMutate</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">options</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token keyword control-flow" style="color:#e3116c">catch</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token parameter">error</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)">// This used to be `if (error.networkError.offline)`</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">if</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">error</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">offline</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)">// This used to be `error.networkError.watchOfflineChange()`</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    error</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token method function property-access" style="color:rgb(111, 66, 193)">watchOfflineChange</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token method function property-access" style="color:rgb(111, 66, 193)">then</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token spread operator" style="color:rgb(0, 92, 197)">...</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>This is the same for local conflict errors:</p><div class="mdxCodeBlock_3lFL"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">client</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token method function property-access" style="color:rgb(111, 66, 193)">offlineMutate</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">options</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token keyword control-flow" style="color:#e3116c">catch</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token parameter">error</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)">// This used to be `if (error.networkError.localConflict)`</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">error</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">localConflict</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)">// handle local conflict</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p><strong>Suggestion:</strong> review all code where <code>error.networkError.&lt;property name&gt;</code> is being accessed and change it to <code>error.&lt;property name&gt;</code></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="offlinequeue-and-offlinestore-are-generic-typescript-users-only"></a><code>OfflineQueue</code> and <code>OfflineStore</code> are generic (TypeScript Users Only)<a class="hash-link" href="#offlinequeue-and-offlinestore-are-generic-typescript-users-only" title="Direct link to heading">#</a></h3><p>The <code>OfflineQueue</code> and <code>OfflineStore</code> classes and some related interfaces have been refactored to handle generic objects. TypeScript users may experience compilation issues if their application references these types.</p><p>New types have been added to <code>offix-client</code> for Apollo specific usage.</p><p><strong>Suggestion:</strong> Migrate the following references:</p><ul><li><code>OfflineQueue</code> becomes <code>ApolloOfflineQueue</code></li><li><code>OfflineStore</code> becomes <code>ApolloOfflineStore</code></li><li><code>OfflineQueueListener</code> becomes <code>ApolloOfflineQueueListener</code></li><li><code>IResultProcessor</code> becomes <code>ApolloIResultProcessor</code></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="new-arguments-passed-to-registerofflineeventlistener-functions"></a>New Arguments passed to registerOfflineEventListener functions<a class="hash-link" href="#new-arguments-passed-to-registerofflineeventlistener-functions" title="Direct link to heading">#</a></h3><p><code>registerOfflineEventListener</code> registers functions that are called on events originating from the <code>OfflineQueue</code>.</p><div class="mdxCodeBlock_3lFL"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">client</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token method function property-access" style="color:rgb(111, 66, 193)">registerOfflineEventListener</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token function" style="color:rgb(111, 66, 193)">onOperationEnqueued</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token parameter">operation</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)">// called when operation was placed on the queue</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token function-variable function" style="color:rgb(111, 66, 193)">onOperationFailure</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token parameter">operation</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)">// called when the operation failed</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token function-variable function" style="color:rgb(111, 66, 193)">onOperationSuccess</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token parameter">operation</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)">// called when the operation was fulfilled</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token function-variable function" style="color:rgb(111, 66, 193)">onOperationRequeued</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token parameter">operation</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)">// called when an operation was loaded in from storage and placed back on the queue</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)">// This would happen across app restarts</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token function" style="color:rgb(111, 66, 193)">queueCleared</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)">// called when all operations are fulfilled and the queue is cleared</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>In previous versions of <code>offix-client</code>, these functions had an <a href="https://www.apollographql.com/docs/link/overview/" target="_blank" rel="noopener noreferrer">Apollo Operation</a> object passed to them. Because Offix no longer uses Apollo Link, this is no longer the case. Instead an <a href="https://github.com/aerogear/offix/blob/b1e42936ff05a3d21c93795eadba07217bd13f23/packages/offix-client/src/apollo/ApolloOfflineClient.ts#L53" target="_blank" rel="noopener noreferrer"><code>ApolloQueueEntryOperation</code></a> is passed. See the example object below.</p><div class="mdxCodeBlock_3lFL"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  qid</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token string">&#x27;client:abc123&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  op</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"> </span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    context</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      operationName</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token string">&#x27;createItem&#x27;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      conflictBase</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token keyword nil" style="color:#e3116c">undefined</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      idField</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token string">&#x27;id&#x27;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      returnType</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token string">&#x27;Item&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    mutation</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token plain">mutation object parsed by gql</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    optimisticResponse</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token plain">optimistic response object</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    variables</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token plain">mutation variables</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p><code>ApolloQueueEntryOperation</code> objects have two top level fields:</p><ul><li><code>qid</code> - Queue ID. This ID is randomly generated and mostly used by the <code>OfflineQueue</code>.</li><li><code>op</code> - The operation. In <code>offix-client</code> It&#x27;s of type <code>MutationOptions</code>, the options object passed into <code>client.offlineMutate</code> with some extra metadata set by <code>offix-client</code>.</li></ul><p><strong>Suggestion:</strong> review any code where <code>registerOfflineEventListener</code> is used and refactor the listener functions to use the new data structure being passed.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="operations-stored-in-offlinestore-are-not-backwards-compatible"></a>Operations Stored in OfflineStore are not backwards compatible<a class="hash-link" href="#operations-stored-in-offlinestore-are-not-backwards-compatible" title="Direct link to heading">#</a></h3><p>Because of the architectural changes to Offix, the objects stored in the OfflineQueue and OfflineStore are different. Previously, the queue and storage mechanisms were based around the <a href="https://www.apollographql.com/docs/link/overview/" target="_blank" rel="noopener noreferrer">Apollo Operation</a>.</p><p><code>offix-client</code> now queues and stores objects based off the <code>MutationOptions</code> object. Unfortunately these changes were not backwards compatible. Existing applications using <code>offix-client</code> that have pending offline operations will not be able to load and requeue those operations after an upgrade to the latest version. The data will still exist in the store and it will be accessible manually. Developers will have to migrate the data themselves. <strong>Data in the Apollo Cache is not affected.</strong> We hope this issue will affect very few users if any at all.</p><p>To ensure this doesn&#x27;t happen in future, we have implemented versioning and new serialize/deserialize interfaces that will allow our storage mechanism to handle these types of upgrades/migrations.</p><p><strong>Suggestions:</strong></p><ul><li>Ensure users have no pending offline operations before administering the update.</li><li>Manually migrate the data using custom application code.</li><li>If it&#x27;s not critical, users can re-enter the data or redo their offline operations.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="features"></a>Features<a class="hash-link" href="#features" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="new-documentation-website"></a>New Documentation Website!<a class="hash-link" href="#new-documentation-website" title="Direct link to heading">#</a></h3><p>Our documentation website has been rebuilt using Docusaurus. Special thanks to <a href="https://github.com/LakshanKarunathilake" target="_blank" rel="noopener noreferrer">@LakshanKarunathilake</a> for the complete overhaul.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="offlinequeue-is-directly-accessible-on-the-client"></a>OfflineQueue is directly accessible on the client<a class="hash-link" href="#offlinequeue-is-directly-accessible-on-the-client" title="Direct link to heading">#</a></h3><p><code>client.queue</code> is now directly accessible. This opens up the possibility for your application to directly see the operations in the queue. It also means you can manually call <code>client.queue.forwardOperations()</code> to execute all operations in the queue.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="offlineclient-accepts-user-provided-inmemorycache"></a>OfflineClient accepts user provided <code>InMemoryCache</code><a class="hash-link" href="#offlineclient-accepts-user-provided-inmemorycache" title="Direct link to heading">#</a></h3><p>It is now possible to pass your own <code>InMemoryCache</code> into <code>OfflineClient</code>. This makes it possible to configure things like cache redirects.</p><div class="mdxCodeBlock_3lFL"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> cache </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token keyword" style="color:#e3116c">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(227, 98, 9)">InMemoryCache</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">yourCacheConfig</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> offlineClient </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token keyword" style="color:#e3116c">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(227, 98, 9)">OfflineClient</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  httpUrl</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token string">&#x27;https://example.com&#x27;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  cache</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="offlineclient-enables-wiping-out-cache-using-persistor-interface"></a>OfflineClient enables wiping out cache using persistor interface<a class="hash-link" href="#offlineclient-enables-wiping-out-cache-using-persistor-interface" title="Direct link to heading">#</a></h3><p><code>offlineClient.persitor.purge()</code> method will wipe entire persistence layer for Apollo cache.</p><blockquote><p>NOTE: InMemoryCache needs to be wiped out as well along with the client. Please execute <code>offlineClient.cache.rest()</code></p></blockquote><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="080"></a>0.8.0<a class="hash-link" href="#080" title="Direct link to heading">#</a></h1><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="features-1"></a>Features<a class="hash-link" href="#features-1" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="offix-react-hooks-alpha-released"></a>Offix React Hooks Alpha released<a class="hash-link" href="#offix-react-hooks-alpha-released" title="Direct link to heading">#</a></h3><p>Offix React Hooks provides helpers for using offix within React and React Native.
Please refer to package README for more information</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="ability-to-customize-apollo-link-chain"></a>Ability to customize Apollo Link chain<a class="hash-link" href="#ability-to-customize-apollo-link-chain" title="Direct link to heading">#</a></h3><p><code>OffixClientConfig.terminatingLink</code> allows to customize client by adding additional links
for handling authentication, network requests etc.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="new-way-to-access-apollo-client"></a>New way to access Apollo Client<a class="hash-link" href="#new-way-to-access-apollo-client" title="Direct link to heading">#</a></h3><p><code>OfflineClient.apolloClient</code> is now public. This means <code>apolloClient</code> is directly accessible after <code>OfflineClient.init()</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="breaking-changes-2"></a>Breaking changes<a class="hash-link" href="#breaking-changes-2" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="changes-for-subscriptions-and-file-uploads"></a>Changes for Subscriptions and File Uploads<a class="hash-link" href="#changes-for-subscriptions-and-file-uploads" title="Direct link to heading">#</a></h3><p>Subscriptions and file uploads were removed from the main library.
Developers can still configure Subscription access directly int their application by
creating Apollo link acording to documentation and passing <code>OffixClientConfig.terminatingLink</code></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="071"></a>0.7.1<a class="hash-link" href="#071" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="offline-operations-persist-optimistic-response"></a>Offline operations persist optimistic response<a class="hash-link" href="#offline-operations-persist-optimistic-response" title="Direct link to heading">#</a></h4><p>Offline operations will now cache update functional and automatically apply optimistic response
<code>OffixClientConfig.mutationCacheUpdates</code> is still required to see optimistic responses after application restart.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="watchofflinechange-returns-mutation-result"></a>watchOfflineChange returns mutation result<a class="hash-link" href="#watchofflinechange-returns-mutation-result" title="Direct link to heading">#</a></h4><p>We have discovered bug where <code>watchOfflineChange</code> method from <code>OfflineError</code> was missing mutation results.
This is now fixed so your UI can instantly watch for offline chances and render when succeeded.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="070"></a>0.7.0<a class="hash-link" href="#070" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="support-apollo-26x"></a>Support Apollo 2.6.x<a class="hash-link" href="#support-apollo-26x" title="Direct link to heading">#</a></h4><p>Apollo Client 2.6.x with new typings is now supported.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="extended-conflict-support"></a>Extended conflict support<a class="hash-link" href="#extended-conflict-support" title="Direct link to heading">#</a></h4><p>New conflict implementation requires changes on both client and server.
On server we have changed conflict detection mechanism to single method.
Server side conflict resolution was removed due to the fact that we could not provide
reliable diff source without separate store.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="server-side-implementation"></a>Server side implementation:<a class="hash-link" href="#server-side-implementation" title="Direct link to heading">#</a></h5><div class="mdxCodeBlock_3lFL"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"> </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> conflictError </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> conflictHandler</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token method function property-access" style="color:rgb(111, 66, 193)">checkForConflict</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">greeting</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#e3116c">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">conflictError</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#e3116c">throw</span><span class="token plain"> conflictError</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="client-side-implementation"></a>Client side implementation:<a class="hash-link" href="#client-side-implementation" title="Direct link to heading">#</a></h5><p>Client side implementation now requires users to apply <code>returnType</code> to context when performing a mutation.
Conflict interface now has an additional method <code>mergeOccured</code> that will be triggered when a conflict was resolved without data loss.</p><p>Please refer to documentation for more details.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="breaking-changes-3"></a>Breaking changes<a class="hash-link" href="#breaking-changes-3" title="Direct link to heading">#</a></h4><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="datasync-config-renamed"></a>DataSync Config renamed<a class="hash-link" href="#datasync-config-renamed" title="Direct link to heading">#</a></h5><p><code>DataSyncConfig</code> interface was renamed to <code>OffixClientConfig</code>.
Please review if your configuration still conforms to the new interface.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="cache-helper-interface"></a>Cache Helper Interface<a class="hash-link" href="#cache-helper-interface" title="Direct link to heading">#</a></h5><p>Cache Helper interface now will now accept object instead of individual parameters:</p><div class="mdxCodeBlock_3lFL"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> updateFunction </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">getUpdateFunction</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  mutationName</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  idField</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  operationType</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  updateQuery</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/aerogear/offix/edit/master/website/versioned_docs/version-offix-0.15.0/ref-release-notes.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/offix-0.15.0/offix-scheduler-introduction"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label"> Offix Scheduler Introduction</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#breaking-changes" class="table-of-contents__link">Breaking Changes</a><ul><li><a href="#offlineclient-replaced-with-apolloofflineclient" class="table-of-contents__link">OfflineClient replaced with ApolloOfflineClient</a></li></ul></li><li><a href="#offix-scheduler" class="table-of-contents__link">offix-scheduler</a></li><li><a href="#offix-conflicts-client" class="table-of-contents__link">offix-conflicts-client</a></li><li><a href="#background" class="table-of-contents__link">Background</a></li><li><a href="#breaking-changes-1" class="table-of-contents__link">Breaking Changes</a><ul><li><a href="#clientofflinemutation-has-been-deprecated-in-favour-of-clientofflinemutate" class="table-of-contents__link"><code>client.offlineMutation</code> has been deprecated in favour of <code>client.offlineMutate</code></a></li><li><a href="#clientmutate-no-longer-does-any-offline-scheduling" class="table-of-contents__link">client.mutate no longer does any offline scheduling</a></li><li><a href="#removed-onlineonly-directive" class="table-of-contents__link">Removed <code>@OnlineOnly</code> directive</a></li><li><a href="#errors-from-clientofflinemutate-do-not-have-networkerror-property" class="table-of-contents__link">Errors from <code>client.offlineMutate()</code> do not have <code>networkError</code> property.</a></li><li><a href="#offlinequeue-and-offlinestore-are-generic-typescript-users-only" class="table-of-contents__link"><code>OfflineQueue</code> and <code>OfflineStore</code> are generic (TypeScript Users Only)</a></li><li><a href="#new-arguments-passed-to-registerofflineeventlistener-functions" class="table-of-contents__link">New Arguments passed to registerOfflineEventListener functions</a></li><li><a href="#operations-stored-in-offlinestore-are-not-backwards-compatible" class="table-of-contents__link">Operations Stored in OfflineStore are not backwards compatible</a></li></ul></li><li><a href="#features" class="table-of-contents__link">Features</a><ul><li><a href="#new-documentation-website" class="table-of-contents__link">New Documentation Website!</a></li><li><a href="#offlinequeue-is-directly-accessible-on-the-client" class="table-of-contents__link">OfflineQueue is directly accessible on the client</a></li><li><a href="#offlineclient-accepts-user-provided-inmemorycache" class="table-of-contents__link">OfflineClient accepts user provided <code>InMemoryCache</code></a></li><li><a href="#offlineclient-enables-wiping-out-cache-using-persistor-interface" class="table-of-contents__link">OfflineClient enables wiping out cache using persistor interface</a></li></ul></li><li><a href="#features-1" class="table-of-contents__link">Features</a><ul><li><a href="#offix-react-hooks-alpha-released" class="table-of-contents__link">Offix React Hooks Alpha released</a></li><li><a href="#ability-to-customize-apollo-link-chain" class="table-of-contents__link">Ability to customize Apollo Link chain</a></li><li><a href="#new-way-to-access-apollo-client" class="table-of-contents__link">New way to access Apollo Client</a></li></ul></li><li><a href="#breaking-changes-2" class="table-of-contents__link">Breaking changes</a><ul><li><a href="#changes-for-subscriptions-and-file-uploads" class="table-of-contents__link">Changes for Subscriptions and File Uploads</a></li><li><a href="#071" class="table-of-contents__link">0.7.1</a></li><li><a href="#070" class="table-of-contents__link">0.7.0</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/introduction">Offix Datastore</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/react">Platforms</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/replication">Advanced Topics</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/release-notes">Releases</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/aerogear/offix" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://discordapp.com/invite/mJ7j84m" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://aerogear.org/" target="_blank" rel="noopener noreferrer" class="footerLogoLink_MyFc"><img src="/img/aerogear.png" alt="AeroGear Logo" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="/img/aerogear.png" alt="AeroGear Logo" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></a></div><div class="footer__copyright">Copyright  2021 AeroGear</div></div></div></footer></div>
<script src="/assets/js/styles.ebd86db9.js"></script>
<script src="/assets/js/runtime~main.58f7017d.js"></script>
<script src="/assets/js/main.18bc1cf6.js"></script>
<script src="/assets/js/1.90238a31.js"></script>
<script src="/assets/js/2.31b35ec9.js"></script>
<script src="/assets/js/49.391e3bd6.js"></script>
<script src="/assets/js/50.5ad58c42.js"></script>
<script src="/assets/js/ba1fde28.fca20ae3.js"></script>
<script src="/assets/js/17896441.6acd41fd.js"></script>
<script src="/assets/js/c950a71e.b7ff5c44.js"></script>
</body>
</html>